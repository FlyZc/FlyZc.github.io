{"title":"VMware安装Hadoop环境","date":"2022-01-24T14:32:39.000Z","date_formatted":{"ll":"Jan 24, 2022","L":"01/24/2022","MM-DD":"01-24"},"link":"2022/01/24/VMware安装Hadoop环境","tags":["Hadoop"],"categories":["大数据"],"updated":"2022-03-19T12:16:13.749Z","content":"<h3 id=\"配置master节点环境\">配置Master节点环境<a title=\"#配置master节点环境\" href=\"#配置master节点环境\"></a></h3>\n<ul>\n<li>配置IP信息<br>\n<code>vi /etc/sysconfig/network-scripts/ifcfg-ens33</code></li>\n</ul>\n<div align=center><img src=\"https://blogpic-1301978692.cos.ap-chongqing.myqcloud.com/bolg/ifcfg.png\" width = 500> </div>\n<ul>\n<li>虚拟机NAT设置</li>\n</ul>\n<div align=center><img src=\"https://blogpic-1301978692.cos.ap-chongqing.myqcloud.com/bolg/natcfg.png\" width = 500></div>\n<ul>\n<li>虚拟机DHCP设置</li>\n</ul>\n <div align = center><image src = \"https://blogpic-1301978692.cos.ap-chongqing.myqcloud.com/bolg/dhcpcfg.png\" width =500></div>\n<ul>\n<li>\n<p>重启网络<br>\n<code>systemctl restart network</code></p>\n</li>\n<li>\n<p>配置host信息</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">vim</span> /etc/hosts</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"number\">192.168</span>.<span class=\"number\">159.19</span> master</span><br><span class=\"line\"><span class=\"number\">192.168</span>.<span class=\"number\">159.20</span> slave1</span><br><span class=\"line\"><span class=\"number\">192.168</span>.<span class=\"number\">159.21</span> slave2</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>配置network</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">vim</span> /etc/sysconfig/network</span><br><span class=\"line\">NETWORKING=yes</span><br><span class=\"line\">HOSTNAME=masterr</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>配置hostname</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">vim</span> /etc/<span class=\"built_in\">hostname</span></span><br><span class=\"line\">Master</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>关闭网络管理</p>\n<p><code>systemctl stop NetworkManager</code><br>\n<code>systemctl disable NetworkManager</code></p>\n</li>\n<li>\n<p>关闭linux内核防火墙</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">vim</span> /etc/selinux/config</span><br><span class=\"line\">SELINUX=disable</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>内核防火墙置空</p>\n<p><code>setenfore 0</code></p>\n</li>\n<li>\n<p>关闭防火墙</p>\n<p><code>systemctl stop firewalld</code><br>\n<code>systemctl disable firewalld</code></p>\n</li>\n<li>\n<p>配置hadoop和jdk环境</p>\n<figure class=\"highlight vim\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">vim</span> ~/.bashrc</span><br><span class=\"line\"></span><br><span class=\"line\">export JAVA_HOME=/usr/local/src/jdk1.<span class=\"number\">8.0</span>_172</span><br><span class=\"line\">export CLASSPATH=.:$CLASSPATH:$JAVA_HOME/lib</span><br><span class=\"line\">export HADOOP_HOME=/usr/local/src/hadoop-<span class=\"number\">2.7</span>.<span class=\"number\">7</span></span><br><span class=\"line\">export M2_HOME=/<span class=\"keyword\">opt</span>/apache-maven-<span class=\"number\">3.5</span>.<span class=\"number\">4</span></span><br><span class=\"line\">export PATH=$PATH:$JAVA_HOME/bin:$HADOOP_HOME/bin:$HADOOP_HOME/sbin</span><br><span class=\"line\">export HADOOP_OPTS=<span class=\"string\">&quot;-Djava.library.path=$&#123;HADOOP_HOME&#125;/lib/native&quot;</span></span><br><span class=\"line\">export PATH=$PATH:$M2_HOME/bin</span><br><span class=\"line\">export FINDBUGS_HOME=/<span class=\"keyword\">opt</span>/findbugs-<span class=\"number\">3.0</span>.<span class=\"number\">1</span></span><br><span class=\"line\">export PATH=$PATH:$FINDBUGS_HOME/bin</span><br><span class=\"line\">export HIVE_HOME=/usr/local/src/apache-hive-<span class=\"number\">1.2</span>.<span class=\"number\">2</span>-bin</span><br><span class=\"line\">export PATH=$PATH:$HIVE_HOME/bin</span><br></pre></td></tr></table></figure>\n</li>\n<li>\n<p>覆盖hadoop目录etc/hadoop下列文件</p>\n<ul>\n<li>core-site.xml</li>\n<li>hdfs-site.xml</li>\n<li>mapred-site.xml</li>\n<li>slaves</li>\n<li>yarn-site.xml</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"配置slave节点环境\">配置Slave节点环境<a title=\"#配置slave节点环境\" href=\"#配置slave节点环境\"></a></h3>\n<p>master配置完毕后，拷贝镜像文件分别配置slave1和slave2，并修改以下参数信息</p>\n<ul>\n<li><code>vi /etc/sysconfig/network-scripts/ifcfg-ens33</code></li>\n<li><code>vim /etc/sysconfig/network</code></li>\n<li><code>vim /etc/hostname</code></li>\n<li><code>systemctl restart network</code></li>\n</ul>\n<h3 id=\"配置三台设备互信\">配置三台设备互信<a title=\"#配置三台设备互信\" href=\"#配置三台设备互信\"></a></h3>\n<ul>\n<li><code>ssh-keygen -t rsa</code></li>\n<li><code>cat /root/.ssh/id_rsa.pub &gt; /root/.ssh/authorized_keys</code></li>\n<li><code>ssh master cat /root/.ssh/authorized_keys &gt;&gt; /root/.ssh/authorized_keys</code></li>\n</ul>\n<h3 id=\"磁盘格式化\">磁盘格式化<a title=\"#磁盘格式化\" href=\"#磁盘格式化\"></a></h3>\n<ul>\n<li><code>hadoop namenode -format</code></li>\n</ul>\n<h3 id=\"故障处理\">故障处理<a title=\"#故障处理\" href=\"#故障处理\"></a></h3>\n<p>如果集群出错，先停止集群进程，三台设备均删除相关文件后重新进行磁盘格式化</p>\n<ul>\n<li><code>stop-all.sh</code></li>\n<li><code>rm -rf /dfs /logs /tmp</code></li>\n<li><code>hadoop namenode -format</code></li>\n</ul>\n","prev":{"title":"Centos 7.6安装Mysql","link":"2022/01/25/Centos-7-6安装Mysql"},"next":{"title":"617-Merge Two Binary Trees","link":"2020/06/08/617-Merge-Two-Binary-Trees"},"plink":"https://zhoufeichi.com/2022/01/24/VMware安装Hadoop环境/","toc":[{"id":"配置master节点环境","title":"配置Master节点环境","index":"1"},{"id":"配置slave节点环境","title":"配置Slave节点环境","index":"2"},{"id":"配置三台设备互信","title":"配置三台设备互信","index":"3"},{"id":"磁盘格式化","title":"磁盘格式化","index":"4"},{"id":"故障处理","title":"故障处理","index":"5"}],"reward":true,"reading_time":"423 words in 3 min"}